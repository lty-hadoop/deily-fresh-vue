<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        *{margin:0;padding:0;}
        .footer{
            width: 100%;
            margin: 20px;
            font-size: 13px;
        }
        .prev, .next{
            float: left;
            width: 30px;
            line-height: 30px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            background: #fff;
            cursor: pointer;
            outline: none;
        }
        li{
            list-style: none;
            float: left;
            line-height: 30px;
            margin: 0 5px;
            width: 30px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            text-align: center;          
            cursor: pointer;
        }
        li.active{
            background: #fff;
            border-color: #1890ff;
            color: #1890ff;
        }
        li:hover{
            border-color: #1890ff;
            color: #1890ff;
        }
        .jump{
            float: left;
            margin-left: 5px;
        }
        .jump input {
            width: 40px;
            height: 30px;
            line-height: 30px;
            padding: 0 3px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            text-align: center;
            outline: none;
        }
        .jump .jump-btn {
            height: 32px;
            line-height: 32px;
            padding: 0 5px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            background: #fff;
            cursor: pointer;
        }
        .jump .jump-btn:hover {
            opacity: .6;
        }
        .clearfix::after {
            content: "";
            display: block;
            height: 0;
            clear: both;
            visibility: hidden;;
        }
    </style>
</head>
<body>
    <div class="footer">
        
    </div>

    <script>
        class Pagination {
            constructor(options){
                this.$options = options
                // DOM节点
                this.$el = this.Selector(this.$options.el)
                // 总条数
                this.total = this.$options.total
                // 总页数
                this.pageSize = (this.total / this.$options.pageSize)
                // 当前页
                this.pageNum = this.$options.pageNum || 1
                // 显示多少页
                this.pagerCount = this.$options.pagerCount
                
                // 判断奇偶
                this.JudgeParity()            
            }

            // 初始化分页器
            InitPage() {
                this.pageNum = Number(this.pageNum)
                // 求奇偶数
                let offPage = (this.pagerCount - 1) / 2
                // 开始页
                let startPage = this.pageNum - offPage
                // 结束页
                let endPage = this.pageNum + offPage

                if (this.pageNum < offPage + 1) {
                    startPage = 1
                    endPage = 2 * offPage + 1
                };
                if (this.pageNum + offPage > this.pageSize) {
                    startPage = this.pageSize - 2 * offPage
                    endPage = this.pageSize
                }

                let str = '';
                str += '<button class="prev"><</button>'
                str += '<ul class="ul">'
                // str += '<li>1</li>'
                // str += '<li class="more-prex">...</li>'

				for(let i = startPage; i <= endPage; i++){
					if(this.pageNum == i){
                        str += `<li class="active">${i}</li>`
                    } else {
                        str += `<li>${i}</li>`
                    }
				}

                str += '</ul>'
                str += '<button class="next">></button>'
                str += `<div class="jump">
                            <input type="text" class="oval">
                            <button class="jump-btn">跳转到</button>
                        </div>`

                // str += '<li class="more-prex">...</li>'
                // str += `<li>${this.pageSize}</li>`

                this.$el.innerHTML = str
            }

            // 添加点击事件
            InitClick() {
                let $ul = this.Selector('.ul')
                $ul.onclick = function(event){
                    this.pageNum = Number(event.target.innerHTML)
                    this.InitPage(this.pageNum)
                }.bind(this)
            }


            // 上一页
            PrevClick() {
                let prev = this.Selector('.prev');
                prev.onclick = function(event) {
                    if(this.pageNum > 1){
                        this.pageNum--
                        this.InitPage(this.pageNum)
                    } else {
                        this.DisableBtn(event, 1)
                    }
                }.bind(this)
            }

            // 下一页
            NextClick() {
                let next = this.Selector('.next');
                next.onclick = function(event) {
                    if(this.pageNum < this.pageSize){
                        this.pageNum++
                        this.InitPage(this.pageNum)
                    } else {
                        this.DisableBtn(event, this.pageNum)
                    }
                }.bind(this)
            }

            // 禁止按钮
            DisableBtn(event, curIndex) {
                let args = Array.prototype.slice.call(arguments)
                let curObj = args.first().target
                if(args[1] <= 1){
                    alert('已经是首页')
                    return
                } else if(curIndex == this.pageSize){
                    alert('已经是尾页')
                    return
                }
            }

            // 跳转
            Jump() {
                let oJump = this.Selector('.jump-btn'),
                    oVal = this.Selector('.oval');
                oJump.onclick = function(event) {
                    if(!!oVal.value){
                        this.pageNum = Number(oVal.value)
                        if(this.pageNum > this.pageSize){
                            alert('暂无更多页')
                        } else {
                            this.InitPage(this.pageNum)
                        }
                    } else {
                        alert('请输入')
                    }
                    oVal.value = ''
                }.bind(this)
            }


            // 判断奇偶
            JudgeParity() {
                if(this.pagerCount % 2 == 0) {
                    // 表示是偶数
                    alert('请传入基数')
                    return
                } else {
                    this.InitPage()
                    this.InitClick()
                    this.PrevClick()
                    this.NextClick()
                    this.Jump()
                }
            }

            // 选择器
            Selector(ele) {
                if(!!ele && ele.indexOf('.') !== -1) {
                    return document.querySelector(ele)
                } else {
                    return document.querySelectorAll(ele)
                }         
            }
        }

        Array.prototype.first = function(){
            return this[0]
        }
        
        // 实例化分页控件
        new Pagination({
            el: '.footer',
            pageSize: 10,
            pageNum: 5,
            total: 100,
            pagerCount: 5
        })
    </script>
</body>
</html>