<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		*{margin:0;padding:0;}
		#calendar{
			width: 100%;
			margin: 10px 0 0 20px;
			box-sizing: border-box;
		}
		.week {
			width: 245px;
		}
		.week span {
			display: inline-block;
			width: 35px;
			height: 30px;
			line-height: 30px;
			text-align: center;
		}
		.list {
			display: flex;
  			flex-wrap: wrap;
  			width: 245px;
		}
		ul li {		
			width: 35px;
			height: 30px;
			line-height: 30px;
			list-style: none;
			text-align: center;
			color: #353A41;
		}
		li.current_day {
			background-color: #ACEBDC;
  			border-radius: 50%;
			color: #009A70;
		}
		li:hover {
			cursor: pointer;
		}
	</style>
</head>
<body>
	<div id="calendar">
		<div class="week"></div>
		<ul class="list"></ul>
	</div>

	<script>
		class Calendar {
			constructor() {
				let oDate = new Date()
				this.oYear = oDate.getFullYear()
				this.oMonth = oDate.getMonth() + 1
				this.oDay = oDate.getDate()

				this.oWeek = ['日','一','二','三','四','五','六']
				this.oW = document.querySelector('.week')
			
				this.oW.innerHTML = this.InitCalendar(this.oWeek)
				this.Render(this.oYear, this.oMonth)
				this.AddClass(this.oDay)
				this.CurrentEle()
			}

			// 初始化日历
			InitCalendar(data) {
				let str = '';
				for(let i = 0; i <= data.length - 1; i++){
					str += `<span data-index="${data[i]}">${data[i]}</span>`
				}
				return str	
			}

			// 渲染
			Render(currentYear, currentMonth) {
				let $ul = document.querySelector('.list')
				// 获取当月天数
				let dayNum = new Date(currentYear, currentMonth, 0).getDate()

				//获取当月第一天是周几
    			let weekStart = new Date(currentYear, currentMonth-1, 1).getDay()

    			// console.log(weekStart)

    			if(weekStart == 0) weekStart = 7

				//展示当月日期需要的行数
			    let cluNum = Math.ceil((weekStart + dayNum - 1)/7);

			    let allNum = cluNum * 7;

			    let $li = '', currentDay ='';
			    for(var i = 1; i <= allNum; i++){
			    	currentDay = i - weekStart + 1;

			    	// console.log(i)
			    	// console.log(i-weekStart)
			    	// console.log(dayNum)
			    	// console.log((i-weekStart) < dayNum)
		    		if(i >= weekStart && (i-weekStart) < dayNum) {
		      			$li += `<li>${currentDay}</li>`;
		        		$ul.innerHTML = $li
		      		}
		      		// else {
		      		// 	$ul.innerHTML = `<li></li>`
		      		// }
		      		$ul.innerHTML
		    	}
			}

			// 样式
			AddClass(currentDay) {
				let $lis = document.querySelectorAll('li')
		        $lis[this.oDay - 1].className = 'current_day'
			}

			// 当前点击元素
			CurrentEle() {
				let $lis = document.querySelectorAll('li')
				for(let i = 0; i < $lis.length; i++){
                    $lis[i].addEventListener('click', function(event){
                        console.log(event.target.innerHTML)
                    }.bind(this))
                }
			}
		}

		new Calendar()
	</script>
</body>
</html>